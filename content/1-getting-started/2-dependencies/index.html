
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://entity-toolkit.github.io/wiki/content/1-getting-started/2-dependencies/">
      
      
        <link rel="prev" href="../1-compile-run/">
      
      
        <link rel="next" href="../3-inputfile/">
      
      
      <link rel="icon" href="../../../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Dependencies - Entity: wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%2020c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208m0-18A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202m1%205h-2v4H7v2h4v4h2v-4h4v-2h-4z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"DM Sans";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
  
  <link rel="stylesheet" href="../../../js/vendor/katex/katex.min.css">
  <script src="../../../js/vendor/katex/katex.min.js"></script>
  <script src="../../../js/vendor/katex/contrib/auto-render.min.js"></script>
  <script src="../../../js/hooks/katex.js" defer></script>
  
  
    
      
        <link rel="stylesheet"
              href="../../../js/vendor/highlight.js/styles/github.min.css"
              id="highlight-light"
              media="screen">
        <link rel="stylesheet"
              href="../../../js/vendor/highlight.js/styles/github-dark.min.css"
              id="highlight-dark"
              media="screen">
        <script src="../../../js/vendor/highlight.js/highlight.min.js"></script>
        <script src="../../../js/hooks/highlight.js" defer></script>
      
    
  
  
  
    
      <script type="module" src="../../../js/scripts/dependencies.js"></script>
    
  

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="ntt-light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dependencies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Entity: wiki" class="md-header__button md-logo" aria-label="Entity: wiki" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Entity: wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dependencies
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="ntt-light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="ntt-dark" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/entity-toolkit/entity" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.85 1.85 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.85 1.85 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"/></svg>
  </div>
  <div class="md-source__repository">
    entity
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Entity: wiki" class="md-nav__button md-logo" aria-label="Entity: wiki" data-md-component="logo">
      
  <img src="../../../assets/logo.svg" alt="logo">

    </a>
    Entity: wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/entity-toolkit/entity" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.546 10.93 13.067.452a1.55 1.55 0 0 0-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 0 1 2.327 2.341l2.658 2.66a1.838 1.838 0 0 1 1.9 3.039 1.837 1.837 0 0 1-2.6 0 1.85 1.85 0 0 1-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348a1.85 1.85 0 0 1 0 2.6 1.844 1.844 0 0 1-2.609 0 1.834 1.834 0 0 1 0-2.598c.182-.18.387-.316.605-.406V8.835a1.834 1.834 0 0 1-.996-2.41L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477a1.545 1.545 0 0 0 2.186 0l10.43-10.43a1.544 1.544 0 0 0 0-2.187"/></svg>
  </div>
  <div class="md-source__repository">
    entity
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-compile-run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compiling/running
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Dependencies
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Dependencies
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preinstalling-third-party-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Preinstalling third-party libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preinstalling third-party libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spack-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Spack (recommended)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Spack (recommended)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identifying-pre-installed-compilerspackages" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying pre-installed compilers/packages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-spack-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up spack environment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anaconda" class="md-nav__link">
    <span class="md-ellipsis">
      Anaconda
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-dependencies-from-source" class="md-nav__link">
    <span class="md-ellipsis">
      Building dependencies from source
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3-inputfile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Input parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4-units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding the units
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5-vis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Output &amp; visualization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6-checkpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Writing checkpoints &amp; restarting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editing the documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9-faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F.A.Q.
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Understanding the code
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Understanding the code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/1-pic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PIC Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/2-hierarchy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hierarchy of structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/3-domains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metadomain, subdomains and meshes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/4-fields_particles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fields and particles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/5-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/6-problem_generators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Problem generators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-code/7-guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Useful things
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Useful things
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../useful/costtool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulation cost estimator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../useful/cluster-setups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster setups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../useful/float-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Floating point comparison
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../useful/theory_pic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory behind PIC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../useful/ks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kerr metric
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Fun
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Fun
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fun/pushers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Particle pushers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fun/coords/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Axisymmetric coordinates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fun/cubed_sphere/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cubed-sphere geometry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fun/particle-shapes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2D particle shapes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/sceecs2024/instructions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SCEECS Summer School 2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


<h1 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h1>
<p>To compile the code you need to have the following dependencies installed:</p>
<ul>
<li><a href="https://cmake.org/"><code>CMake</code></a> (version &gt;= 3.16; verify by running <code>cmake --version</code>).</li>
<li><a href="https://gcc.gnu.org/"><code>GCC</code></a> (version &gt;= 8.3.1; verify by running <code>g++ --version</code>), <a href="https://llvm.org/"><code>llvm</code></a> (tested on version &gt;= 11; verify by running <code>clang++ --version</code>) or <a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/dpc-compiler.html">Intel C++ compiler</a> (version &gt;= 19.1 or higher; verify by running <code>icx --version</code>).</li>
<li>to compile for NVIDIA GPUs, you need to have the <a href="https://developer.nvidia.com/cuda-toolkit"><code>CUDA toolkit</code></a> installed (version &gt;= 11.0; verify by running <code>nvcc --version</code>).</li>
<li>to compile for AMD GPUs, you will need the <a href="https://github.com/ROCm/HIP">ROCm libraries and the HIP compilers/runtime</a> (verify by running <code>hipcc --version</code>).</li>
<li><code>MPI</code> (e.g., <code>OpenMPI</code>, <code>MPICH</code>, etc.; verify by running <code>mpicxx --version</code>) for multi-node simulations.</li>
<li><code>HDF5</code> for data output (verify by running <code>h5c++ --version</code>).</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Cuda compatibility</p>
<p>Note, that different versions of <code>CUDA</code> are compatible with different host compiler versions (i.e., <code>gcc</code>, <code>llvm</code>, etc.). Please, refer to the <a href="https://gist.github.com/ax3l/9489132">following curated list</a> for the compatibility matrix.</p>
</div>
<p>All the other third-party dependencies, such as <code>Kokkos</code> and <code>ADIOS2</code>, are included in the repository as submodules and can be automatically compiled when you run <code>cmake</code> (although, we recommend to install <code>ADIOS2</code> externally as it can take a while to compile). </p>
<p>In addition to this section, we also provide more detailed instructions on how to set up the dependencies as well as the submit scripts for the most popular and widely used clusters <a href="../../useful/cluster-setups/">in the following section</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To play with the code with all the dependencies already installed in the containerized environment, please refer to <a href="../8-docker/">the section on Docker</a>.</p>
</div>
<hr />
<h2 id="preinstalling-third-party-libraries">Preinstalling third-party libraries<a class="headerlink" href="#preinstalling-third-party-libraries" title="Permanent link">&para;</a></h2>
<p>To speed up the compilation process, it is often beneficial to precompile &amp; install the third-party libraries and use those during the build process, either by setting the appropriate environment variables, using it within a conda/spack environment, or by using environment modules. Alternatively, of course, you can use the libraries provided by your system package manager (<code>pacman</code>, <code>apt</code>, <code>brew</code>, <code>nix</code>, ...), or the cluster's module system.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the system you're working on has <code>MPI</code> or <code>HDF5</code> already installed (either through environment modules or any package manager), it's highly recommended to use these libraries, instead of building your own. Instructions for these two here are provided as a last resort.</p>
</div>
<h3 id="spack-recommended">Spack (recommended)<a class="headerlink" href="#spack-recommended" title="Permanent link">&para;</a></h3>
<p><a href="https://spack.readthedocs.io/en/latest/">Spack</a> is essentially a package manager for HPC systems which allows to install all the dependencies locally, optionally cross-compiling them with the already available libraries. If spack is not already available on your system (or on a cluster), you can simply download it (preferably to your home directory) with:</p>
<div class="language-sh highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>-c<span class="w"> </span>feature.manyFiles<span class="o">=</span><span class="nb">true</span><span class="w"> </span>--depth<span class="o">=</span><span class="m">2</span><span class="w"> </span>https://github.com/spack/spack.git
</code></pre></div>
<p>and add the following to your <code>.bashrc</code> or <code>.zshrc</code> (or analogous) startup file:</p>
<div class="language-sh highlight"><pre><span></span><code>.<span class="w"> </span>spack/share/spack/setup-env.sh
</code></pre></div>
<p>to activate <code>spack</code> on shell login.</p>
<h4 id="identifying-pre-installed-compilerspackages">Identifying pre-installed compilers/packages<a class="headerlink" href="#identifying-pre-installed-compilerspackages" title="Permanent link">&para;</a></h4>
<p>Since spack compiles everything from the source code, it is recommended to use as many of the already pre-installed packages as possible. In particular, you can use the already installed compilers, or big libraries, such as the MPI and HDF5. To make spack aware of their existence, you can simply run:</p>
<div class="language-sh highlight"><pre><span></span><code><span class="c1"># to add compilers</span>
spack<span class="w"> </span>compiler<span class="w"> </span>add
<span class="c1"># and to add all libraries</span>
spack<span class="w"> </span>external<span class="w"> </span>find
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your machine is using environment modules, you may need to first load the compilers/libraries you need, before running the command above, e.g.:
<div class="language-sh highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>gcc/13
module<span class="w"> </span>load<span class="w"> </span>openmpi/5
</code></pre></div></p>
</div>
<p>If for some reason spack does not find the local package you need, you may want to add it manually, by modifying the <code>$HOME/.spack/packages.yaml</code> file to add the following (example for locally installed <code>cuda</code> and <code>openmpi</code>):
<div class="language-yaml highlight"><pre><span></span><code><span class="nt">packages</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">cuda</span><span class="p">:</span>
<span class="w">    </span><span class="nt">buildable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">externals</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/opt/cuda/</span>
<span class="w">      </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cuda@12.8</span>
<span class="w">  </span><span class="nt">openmpi</span><span class="p">:</span>
<span class="w">    </span><span class="nt">buildable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">externals</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/</span>
<span class="w">      </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openmpi@5.0.6</span>
</code></pre></div></p>
<p>Then you can run, e.g., <code>spack spec cuda</code> to check whether it finds the package: <code>[e]</code> at the front will indicate that it found the external package, if so -- you can "install" it in spack by using <code>spack install cuda</code> or <code>spack install openmpi</code>.</p>
<p>To check which packages <code>spack</code> has found, simply run <code>spack find</code> or to check the compilers, run <code>spack compilers</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is strongly recommended to use the pre-installed <code>MPI</code>, <code>CUDA</code> and other big libraries, instead of installing them via <code>spack</code> since these can be specifically configured on the machine you're running on.</p>
</div>
<h4 id="setting-up-spack-environment">Setting up spack environment<a class="headerlink" href="#setting-up-spack-environment" title="Permanent link">&para;</a></h4>
<p>After that, it is recommended to create a spack environment and install all the other libraries within it. To do so, first create &amp; activate the environment by running:</p>
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>entity-env
spack<span class="w"> </span>env<span class="w"> </span>activate<span class="w"> </span>entity-env
</code></pre></div>
<p>Whenever you activate this environment, spack will automatically add the libraries installed within it to the <code>PATH</code> so that <code>cmake</code> can identify them when compiling the <code>Entity</code>. Within the environment you may now install all the necessary libraries. Below we present the possible commands you may need to run for each of them. Make sure to first check which dependencies will <code>spack</code> use to compile the library before actually installing. For that, you can run, e.g.,</p>
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>spec<span class="w"> </span>kokkos<span class="w"> </span>&lt;OPTIONS&gt;
</code></pre></div>
<p>which will show all the dependencies it will use. In front of each dependency, you'll see one of the following:</p>
<ul>
<li>
<p><code>[e]</code>: external (locally installed) package, </p>
</li>
<li>
<p><code>[+]</code>: a package already installed within spack, </p>
</li>
<li>
<p><code>[-]</code>: a package that will be downloaded and built during the installation.</p>
</li>
</ul>
<p>Once you're satisfied, you may run <code>spack install --add kokkos &lt;OPTIONS&gt;</code> to actually perform the installation (within the environment).</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><code>HDF5</code></label><label for="__tabbed_1_2"><code>ADIOS2</code></label><label for="__tabbed_1_3"><code>Kokkos</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>It is highly recommended to use the <code>HDF5</code> already installed on the cluster and find it via <code>spack</code> as described above. Nonetheless, you may also install it via <code>spack</code> using the following command:
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>install<span class="w"> </span>--add<span class="w"> </span>hdf5<span class="w"> </span>+cxx
</code></pre></div>
You may also add <code>-mpi</code> flag to disable the <code>MPI</code> support.</p>
</div>
<div class="tabbed-block">
<p>Because we rely on <code>HDF5</code> together with the <code>ADIOS2</code>, it is recommended to have <code>hdf5</code> installed externally (and make sure <code>spack</code> sees that installation by running <code>spack spec hdf5</code>). You can then install <code>ADIOS2</code> (in a <code>spack</code> environment) using the following command:
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>install<span class="w"> </span>--add<span class="w"> </span>adios2<span class="w"> </span>+hdf5<span class="w"> </span>+pic
</code></pre></div>
You may also add <code>-mpi</code> option to disable the <code>MPI</code> support (<code>HDF5</code> will also have to be serial for that to work).</p>
</div>
<div class="tabbed-block">
<p>For <code>Kokkos</code>, you will always use the following settings <code>+pic +aggressive_vectorization</code> on top of the architecture specific settings. For example, to compile with <code>CUDA</code> support on Ampere80 architecture (A100 card), you can do
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>install<span class="w"> </span>--add<span class="w"> </span>kokkos<span class="w"> </span>+pic<span class="w"> </span>+aggressive_vectorization<span class="w"> </span>+cuda<span class="w"> </span>+wrapper<span class="w"> </span><span class="nv">cuda_arch</span><span class="o">=</span><span class="m">80</span>
</code></pre></div></p>
<p>And, again, before running this command, make sure to run it with <code>spack spec ...</code> instead of <code>spack install --add</code> with the same options just to make sure spack will not install an external CUDA.</p>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes <code>spack</code> might not recognize the CPU architecture properly, especially when compiling on a node different from the one where the code will be running (e.g., login node vs compute node). In that case, when compiling the <code>kokkos</code>, you may need to provide also the following option: <code>target=zen2</code> (or other target cpu architecture). This might fail on the first try, since by default <code>spack</code> does not allow for manual architecture specification, in which case first reconfigure spack using <code>spack config add concretizer:targets:host_compatible:false</code>, and then try again.</p>
</div>
<div class="admonition tip">
<p class="admonition-title"><code>spack info</code></p>
<p>To see all the available configuration options for a given package, simply run <code>spack info &lt;PACKAGE&gt;</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Using an explicit compiler</p>
<p>You can instruct <code>spack</code> to use a specific compiler which it has identified (find out by running <code>spack compilers</code>) by adding the following flag (example for <code>clang</code>):
<div class="language-sh highlight"><pre><span></span><code>spack<span class="w"> </span>install<span class="w"> </span>&lt;PACKAGE&gt;<span class="w"> </span>&lt;OPTIONS&gt;<span class="w"> </span>%clang
</code></pre></div></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Garbage collection</p>
<p>Simply uninstalling the package may left behind some build caches which often take up a lot of space. To get rid of these, you may run <code>spack gc</code> which will try its best to delete all these caches as well as all the unused packages.</p>
</div>
<hr />
<h3 id="anaconda">Anaconda<a class="headerlink" href="#anaconda" title="Permanent link">&para;</a></h3>
<p>If you want to have <code>ADIOS2</code> with the serial <code>HDF5</code> support (i.e., without <code>MPI</code>) installed in the conda environment, we provide a shell script <code>conda-entity-nompi.sh</code> which installs the proper compiler, the <code>hdf5</code> library, and the <code>ADIOS2</code>. Run the scripts via:</p>
<div class="language-shell highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>conda-entity-nompi.sh
</code></pre></div>
<p>This also <code>pip</code>-installs the <code>nt2.py</code> package for post-processing. With this configuration, the <code>Kokkos</code> library will be built in-tree.</p>
<hr />
<h3 id="building-dependencies-from-source">Building dependencies from source<a class="headerlink" href="#building-dependencies-from-source" title="Permanent link">&para;</a></h3>
<p>The form below allows you to generate the appropriate build scripts and optionally the environment modules for the libraries you want to compile and install. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1"><code>MPI</code></label><label for="__tabbed_2_2"><code>hdf5</code></label><label for="__tabbed_2_3"><code>ADIOS2</code></label><label for="__tabbed_2_4"><code>Kokkos</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><strong>Prerequisites</strong>:</p>
<ul>
<li>Make sure to have a host (CPU) compiler such as GCC or LLVM (if necessary, load using <code>module load</code>). </li>
<li>If using CUDA, make sure that <code>$CUDA_HOME</code> points to CUDA install path (if necessary, load cudatoolkit using <code>module load</code>). </li>
</ul>
<p><em>Note</em>: If using environment modules, add the mentioned <code>module load ...</code> commands to the new modulefile created at step #4.</p>
<p><strong>Possible configurations</strong>:</p>
<p><p>
  <input type="checkbox" id="mpi_use_cuda" name="mpi_use_cuda"/>
  <label for="mpi_use_cuda">CUDA support</label>
</p></p>
<p><strong>Procedure</strong>:</p>
<ol>
<li>
<p>Download the <a href="https://github.com/open-mpi/ompi" target="_blank">OpenMPI source code</a>:
<div class="language-sh highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/open-mpi/ompi.git<span class="w"> </span>
<span class="nb">cd</span><span class="w"> </span>ompi
</code></pre></div></p>
</li>
<li>
<p>Run the script below to configure
<div class="script">
</div></p>
</li>
<li>
<p>Compile &amp; install with
<div class="language-sh highlight"><pre><span></span><code>make<span class="w"> </span>-j
make<span class="w"> </span>install
</code></pre></div></p>
</li>
<li>
<p>Optionally, if using environment modules, create a modulefile with the following content:
<div class="module">
</div>
Change the <code>&lt;MPI_INSTALL_DIR&gt;</code> and add <code>module load</code>s for the appropriate compilers as needed.</p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><strong>Prerequisites</strong>:</p>
<ul>
<li>Make sure to have a host (CPU) compiler such as GCC or LLVM (if necessary, load using <code>module load</code>). </li>
<li>If using MPI, make sure that <code>$MPI_HOME</code> points to its install directory (if necessary, load with <code>module load</code>). </li>
</ul>
<p><em>Note</em>: If using environment modules, add the mentioned <code>module load ...</code> commands to the new modulefile created at step #4.</p>
<p><strong>Possible configurations</strong>:</p>
<p><p>
  <input type="checkbox" id="hdf5_use_mpi" name="hdf5_use_mpi"/>
  <label for="hdf5_use_mpi">MPI support</label>
</p></p>
<p><strong>Procedure</strong>:</p>
<ol>
<li>
<p>Download the latest <a href="https://github.com/HDFGroup/hdf5/releases" target="_blank">HDF5 source code</a> (below is an example for <code>1.14.6</code>) into a temporary directory:
<div class="language-sh highlight"><pre><span></span><code>mkdir<span class="w"> </span>hdf5src
<span class="nb">cd</span><span class="w"> </span>hdf5src
wget<span class="w"> </span>https://github.com/HDFGroup/hdf5/releases/download/hdf5_1.14.6/hdf5-1.14.6.tar.gz
tar<span class="w"> </span>xvf<span class="w"> </span>hdf5-1.14.6.tar.gz
</code></pre></div></p>
</li>
<li>
<p>Download the latest dependencies into the same (<code>hdf5src</code>) temporary directory (do not extract):</p>
<ul>
<li><a href="https://github.com/HDFGroup/hdf5_plugins/releases" target="_blank">HDF5 plugins</a> (e.g., 1.14.6):
<div class="language-sh highlight"><pre><span></span><code>wget<span class="w"> </span>https://github.com/HDFGroup/hdf5_plugins/releases/download/hdf5-1.14.6/hdf5_plugins-1.14.tar.gz
</code></pre></div></li>
<li><a href="https://github.com/madler/zlib/releases" target="_blank">ZLIB</a> (e.g., 1.3.1): 
<div class="language-sh highlight"><pre><span></span><code>wget<span class="w"> </span>https://github.com/madler/zlib/releases/download/v1.3.1/zlib-1.3.1.tar.gz
</code></pre></div></li>
<li><a href="https://github.com/zlib-ng/zlib-ng/releases" target="_blank">ZLIBNG</a> (e.g., 2.2.4):
<div class="language-sh highlight"><pre><span></span><code>wget<span class="w"> </span>https://github.com/zlib-ng/zlib-ng/archive/refs/tags/2.2.4.tar.gz
</code></pre></div></li>
<li><a href="https://github.com/MathisRosenhauer/libaec/releases" target="_blank">LIBAEC</a> (e.g., 1.1.3):
<div class="language-sh highlight"><pre><span></span><code>wget<span class="w"> </span>https://github.com/MathisRosenhauer/libaec/releases/download/v1.1.3/libaec-1.1.3.tar.gz
</code></pre></div></li>
</ul>
</li>
<li>
<p>Copy three <code>.cmake</code> scripts from the uncompressed HDF5 directory to the temporary directory:
<div class="language-sh highlight"><pre><span></span><code>cp<span class="w"> </span>hdf5-1.14.6/config/cmake/scripts/*.cmake<span class="w"> </span>.
</code></pre></div></p>
</li>
<li>
<p>In <code>HDF5options.cmake</code> uncomment the following line:
<div class="language-cmake highlight"><pre><span></span><code><span class="nb">set</span><span class="w"> </span><span class="p">(</span><span class="s">ADD_BUILD_OPTIONS</span><span class="w"> </span><span class="s2">&quot;${ADD_BUILD_OPTIONS} -DBUILD_TESTING:BOOL=OFF&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p>In <code>CTestScript.cmake</code> uncomment the following line (or if not present, simply add it below <code>cmake_minimum_required</code>):
<div class="language-cmake highlight"><pre><span></span><code><span class="nb">set</span><span class="w"> </span><span class="p">(</span><span class="s">LOCAL_SKIP_TEST</span><span class="w"> </span><span class="s2">&quot;TRUE&quot;</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p>From the same temporary directory run the following:
<div class="script">
</div></p>
</li>
<li>
<p>Optionally, if using environment modules, create a modulefile with the following content:
<div class="module">
</div></p>
</li>
</ol>
<p>Change the <code>&lt;HDF5_INSTALL_DIR&gt;</code> and add <code>module load</code>s for the appropriate compiler/MPI as needed.</p>
</div>
<div class="tabbed-block">
<p><strong>Prerequisites</strong>:</p>
<ul>
<li>Make sure to have a host (CPU) compiler such as GCC or LLVM (if necessary, load using <code>module load</code>). </li>
<li>Also make sure to have an HDF5 installed; check that <code>$HDF5_ROOT</code> properly points to the install directory (if necessary, load with <code>module load</code>). </li>
<li>If using MPI, make sure that <code>$MPI_HOME</code> points to its install directory (if necessary, load with <code>module load</code>). </li>
</ul>
<p><em>Note</em>: If using environment modules, add the mentioned <code>module load ...</code> commands to the new modulefile created at step #4.</p>
<p><strong>Possible configurations</strong>:</p>
<p><p>
  <input type="checkbox" id="adios2_use_mpi" name="adios2_use_mpi"/>
  <label for="adios2_use_mpi">MPI support</label>
</p></p>
<p><strong>Procedure</strong>:</p>
<ol>
<li>Download the <a href="https://github.com/ornladios/ADIOS2" target="_blank">ADIOS2 source code</a>:
  <div class="language-sh highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/ornladios/ADIOS2.git
<span class="nb">cd</span><span class="w"> </span>ADIOS2
</code></pre></div></li>
<li>Run the script below to configure
<div class="script">
</div></li>
<li>Compile &amp; install with
<div class="language-sh highlight"><pre><span></span><code>cmake<span class="w"> </span>--build<span class="w"> </span>build<span class="w"> </span>-j
cmake<span class="w"> </span>--install<span class="w"> </span>build
</code></pre></div></li>
<li>Optionally, if using environment modules, create a modulefile with the following content:
<div class="module">
</div>
Change the <code>&lt;ADIOS2_INSTALL_DIR&gt;</code> and add <code>module load</code>s for the appropriate compiler/HDF5/MPI as needed.</li>
</ol>
</div>
<div class="tabbed-block">
<p><strong>Prerequisites</strong>:</p>
<ul>
<li>Make sure to have a host (CPU) compiler such as GCC or LLVM (if necessary, load using <code>module load</code>). </li>
<li>If using CUDA, make sure that <code>$CUDA_HOME</code> points to CUDA install path (if necessary, load cudatoolkit using <code>module load</code>). </li>
<li>If using ROCm/HIP, make sure to have <code>hipcc</code>, and set <code>CC</code> and <code>CXX</code> variables to <code>hipcc</code> (if necessary, load HIP SDK using <code>module load</code>).</li>
</ul>
<p><em>Note</em>: If using environment modules, add the mentioned <code>module load ...</code> commands to the new modulefile created at step #4.</p>
<p><strong>Possible configurations</strong>:</p>
<p><p>
  <input type="checkbox" id="kokkos_use_gpu" name="kokkos_use_gpu">
  <label for="kokkos_use_gpu">GPU support</label><br>
</p>
<p>
  <label for="kokkos_cpuarch">CPU architecture: </label>
  <select name="kokkos_cpuarch" id="kokkos_cpuarch">
    <option value="NATIVE">Native</option>
    <optgroup label="ARM">
      <option value="A64FX">ARMv8.2 with SVE Support</option> 
      <option value="ARMV80">ARMv8.0</option>
      <option value="ARMV81">ARMv8.1</option>
      <option value="ARMV8_THUNDERX">ARMv8 ThunderX</option>
      <option value="ARMV8_THUNDERX2">ARMv8 ThunderX2</option>
    </optgroup>
    <optgroup label="AMD">
      <option value="AMDAVX">AMDAVX</option>
      <option value="ZEN">Zen</option>
      <option value="ZEN2">Zen 2</option>
      <option value="ZEN3">Zen 3</option>
    </optgroup>
    <optgroup label="Intel">
      <option value="SPR">Sapphire Rapids</option>
      <option value="SKX">Skylake</option>
      <option value="BDW">Broadwell</option>
      <option value="HSW">Haswell</option>
      <option value="SNB">Sandy Bridge</option>
      <option value="KNL">Knights Landing</option>
      <option value="KNC">Knights Corner</option>
    </optgroup>
    <optgroup label="IBM">
      <option value="POWER9">POWER9</option>
      <option value="POWER8">POWER8</option>
    </optgroup>
  </select>
</p>
<p id="kokkos_gpuarch_selector">
  <label for="kokkos_gpuarch">GPU architecture: </label>
  <select name="kokkos_gpuarch" id="kokkos_gpuarch">
    <option value="NATIVE">Native</option>
    <optgroup label="NVIDIA">
      <option value="HOPPER90">Hopper 9.0: H100</option>
      <option value="ADA89">Ada Lovelace 8.9: L4/L40</option>
      <option value="AMPERE86">Ampere 8.6: A40/A10/A16/A2</option>
      <option value="AMPERE80">Ampere 8.0: A100/A30</option>
      <option value="TURING75">Turing 7.5: T4</option>
      <option value="VOLTA72">Volta 7.2</option>
      <option value="VOLTA70">Volta 7.0: V100</option>
      <option value="PASCAL61">Pascal 6.1: P40/P4</option>
      <option value="PASCAL60">Pascal 6.0: P100</option>
      <option value="MAXWELL53">Maxwell 5.3</option>
      <option value="MAXWELL52">Maxwell 5.2: M60/M40</option>
      <option value="MAXWELL50">Maxwell 5.0</option>
      <option value="KEPLER37">Kepler 3.7: K80</option>
      <option value="KEPLER35">Kepler 3.5: K40/K20</option>
      <option value="KEPLER32">Kepler 3.2</option>
      <option value="KEPLER30">Kepler 3.0: K10</option>
    </optgroup>
    <optgroup label="AMD">
      <option value="AMD_GFX942">GFX942: MI300A/MI300X</option>
      <option value="AMD_GFX940">GFX940: MI300A (pre-production)</option>
      <option value="AMD_GFX90A">GFX90A: MI200 series</option>
      <option value="AMD_GFX908">GFX90A: MI100</option>
      <option value="AMD_GFX906">GFX906: MI50/MI60</option>
      <option value="AMD_GFX1100">GFX1100: 7900xt</option>
      <option value="AMD_GFX1030">GFX1030: V620/W6800</option>
    </optgroup>
    <optgroup label="Intel">
      <option value="INTEL_PVC">Xe-HPC: Max 1550</option>
      <option value="INTEL_XEHP">Xe-HP</option>
      <option value="INTEL_DG1">Iris Xe MAX (DG1)</option>
      <option value="INTEL_GEN12LP">Gen12LP: UHD Graphics 770</option>
      <option value="INTEL_GEN11">Gen11: UHD Graphics</option>
      <option value="INTEL_GEN9">Gen9: HD Graphics 510/Iris Pro 580</option>
      <option value="INTEL_GEN">Just-In-Time compilation</option>
    </optgroup>
  </select>
</p></p>
<p><strong>Procedure</strong>:</p>
<ol>
<li>Download the <a href="https://github.com/kokkos/kokkos.git" target="_blank">Kokkos source code</a>:
  <div class="language-sh highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>-b<span class="w"> </span>master<span class="w"> </span>https://github.com/kokkos/kokkos.git
<span class="nb">cd</span><span class="w"> </span>kokkos
</code></pre></div></li>
<li>Run the script below to configure
<div class="script">
</div></li>
<li>Compile &amp; install with
<div class="language-sh highlight"><pre><span></span><code>cmake<span class="w"> </span>--build<span class="w"> </span>build<span class="w"> </span>-j
cmake<span class="w"> </span>--install<span class="w"> </span>build
</code></pre></div></li>
<li>Optionally, if using environment modules, create a modulefile with the following content:
<div class="module">
</div>
Change the <code>&lt;KOKKOS_INSTALL_DIR&gt;</code> and add <code>module load</code>s for the appropriate host compiler/CUDA/HIP/SYCL as needed.</li>
</ol>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We also provide a command-line tool called <a href="https://github.com/entity-toolkit/ntt-dploy"><code>ntt-dploy</code></a> which can be used for the same purpose.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nix</p>
<p><a href="https://github.com/entity-toolkit/entity/pull/69">
  <span class="since-version">1.2.0</span>
</a></p>
<p>On systems with the <code>nix</code> package manager, you can quickly make a development environment with all the dependencies installed using <code>nix-shell</code> (from the root directory of the code):</p>
<p><div class="language-sh highlight"><pre><span></span><code>nix-shell<span class="w"> </span>dev/nix<span class="w"> </span>--arg<span class="w"> </span>hdf5<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--arg<span class="w"> </span>mpi<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--argstr<span class="w"> </span>gpu<span class="w"> </span>HIP<span class="w"> </span>--argstr<span class="w"> </span>arch<span class="w"> </span>amd_gfx1100

<span class="c1"># you can inspect the default settings by</span>
head<span class="w"> </span>dev/nix/shell.nix
</code></pre></div>
Note the escapes of quotation marks when specifying a string argument.</p>
</div>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021++, Entity dev team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/entity-toolkit/entity/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M216.29 158.39H137C97 147.9 6.51 150.63 6.51 233.18c0 30.09 15 51.23 35 61-25.1 23-37 33.85-37 49.21 0 11 4.47 21.14 17.89 26.81C8.13 383.61 0 393.35 0 411.65c0 32.11 28.05 50.82 101.63 50.82 70.75 0 111.79-26.42 111.79-73.18 0-58.66-45.16-56.5-151.63-63l13.43-21.55c27.27 7.58 118.7 10 118.7-67.89 0-18.7-7.73-31.71-15-41.07l37.41-2.84zm-63.42 241.9c0 32.06-104.89 32.1-104.89 2.43 0-8.14 5.27-15 10.57-21.54 77.71 5.3 94.32 3.37 94.32 19.11m-50.81-134.58c-52.8 0-50.46-71.16 1.2-71.16 49.54 0 50.82 71.16-1.2 71.16m133.3 100.51v-32.1c26.75-3.66 27.24-2 27.24-11V203.61c0-8.5-2.05-7.38-27.24-16.26l4.47-32.92H324v168.71c0 6.51.4 7.32 6.51 8.14l20.73 2.84v32.1zm52.45-244.31c-23.17 0-36.59-13.43-36.59-36.61s13.42-35.77 36.59-35.77c23.58 0 37 12.62 37 35.77s-13.42 36.61-37 36.61M512 350.46c-17.49 8.53-43.1 16.26-66.28 16.26-48.38 0-66.67-19.5-66.67-65.46V194.75c0-5.42 1.05-4.06-31.71-4.06V154.5c35.78-4.07 50-22 54.47-66.27h38.63c0 65.83-1.34 61.81 3.26 61.81H501v40.65h-60.56v97.15c0 6.92-4.92 51.41 60.57 26.84z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.indexes", "navigation.expand", "toc.integrate", "content.code.annotate", "content.code.copy", "content.tooltips", "header.autohide", "search.highlight"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>