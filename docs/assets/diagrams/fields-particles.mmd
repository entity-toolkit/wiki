classDiagram
  class Domain~SimEngine, Metric~{
    see domains...*
  }
  class Particles~Dimension, CoordType~{
    -size_t m_npart
    -size_t m_ntags
    +array_t~int*~ i1
    +array_t~int*~ i2
    +array_t~int*~ i3
    +array_t~prtldx_t*~ dx1
    +array_t~prtldx_t*~ dx2
    +array_t~prtldx_t*~ dx3
    +array_t~real_t*~ ux1
    +array_t~real_t*~ ux2
    +array_t~real_t*~ ux3
    +array_t~real_t*~ weight
    +array_t~int*~ i1_prev
    +array_t~int*~ i2_prev
    +array_t~int*~ i3_prev
    +array_t~prtldx_t*~ dx1_prev
    +array_t~prtldx_t*~ dx2_prev
    +array_t~prtldx_t*~ dx3_prev
    +array_t~short*~ tag
    +array_t~real_t**~ pld
    +array_t~real_t*~ phi
    +rangeActiveParticles() range_t
    +rangeAllParticles() range_t
    +npart() size_t
    +ntags() size_t
    +memory_footprint() size_t
    +npart_per_tag() vector~size_t~
    +set_npart(size_t)
    +SortByTags() vector~size_t~
    +SyncHostDevice()
  }
  class Fields~Dimension, SimEngine~{
    +ndfield_t~D, 6~ em
    +ndfield_t~D, 6~ bckp
    +ndfield_t~D, 3~ cur
    +ndfield_t~D, 3~ buff
    +ndfield_t~D, 6~ aux
    +ndfield_t~D, 6~ em0
    +ndfield_t~D, 3~ cur0
    +memory_footprint() size_t
  }
  class ParticleSpecies {
    -ushort m_index
    -string m_label
    -float m_mass
    -float m_charge
    -size_t m_maxnpart
    -PrtlPusher m_pusher
    -bool m_use_gca
    -Cooling m_cooling
    -ushort m_npld
    +index() ushort
    +label() string
    +mass() float
    +charge() float
    +maxnpart() size_t
    +pusher() PrtlPusher
    +use_gca() bool
    +cooling() Cooling
    +npld() ushort
  }
  
  Domain --* Particles : contains many
  Domain --* Fields : contains
  ParticleSpecies <|-- Particles : inherits

  note "+: public\n-: private\n#: protected\nunderline: static constexpr\nitalic: virtual"